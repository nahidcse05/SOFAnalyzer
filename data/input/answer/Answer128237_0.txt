<p>I won't try to understand the whole script. But I see that <code>dirname</code> is called once, and I suppose that this expression:</p>

<pre><code>cat proprietary-blobs.txt | grep -v ^# | grep -v ^$ | sed -e 's#^/system/##g'
</code></pre>

<p>is supposed to generate a list of file paths, while at least one of the elements is not a valid path.</p>

<p>It's easy to trigger the same error message:</p>

<pre><code>$ dirname -/
dirname: invalid option -- '/'
Try 'dirname --help' for more information.
</code></pre>

<hr>

<p>Inside proprietary-blobs.txt are:</p>

<pre><code>-/system/app/OmaDmclient.apk
-/system/app/qcrilmsgtunnel.apk
-/system/app/shutdownlistener.apk
-/system/app/SprintHiddenMenu.apk
-/system/app/TimeService.apk
-/system/app/UpdateSetting.apk
</code></pre>

<p>All of these error out:</p>

<pre><code>dirname -/system/app/OmaDmclient.apk
dirname: invalid option -- '/'
Try 'dirname --help' for more information.
</code></pre>

<p>It says </p>

<pre><code>This file is generated by device/common/generate-blob-lists.sh - DO NOT EDIT
</code></pre>

<p>So I consider this a bug in that script.</p>
